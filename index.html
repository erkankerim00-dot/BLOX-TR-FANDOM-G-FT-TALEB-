<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BloxTRFandom</title>
</head>
<body>
    
    <!-- background video removed â€” using img/bg.jpg as static background image instead -->

    <div class="site-content">
        <h1>BloxTRFandom Permanent Meyve Talebi</h1>

        <!-- FORM -->
        <form id="form">

            <!--Roblox KullanÄ±cÄ± adÄ±-->
            <nav class="nav bd-container">
                <h3>Roblox KullanÄ±cÄ± AdÄ±</h3>
                <input type="text" id="roblox-username" name="robloxUser" placeholder="Enter your Roblox username" />
            </nav>

            <!--Discord KullanÄ±cÄ± adÄ±-->
            <nav class="nav bd-container">
                <h3>Discord KullanÄ±cÄ± AdÄ±</h3>
                <input type="text" id="discord-username" name="discordUser" placeholder="Enter your Discord username" />
            </nav>

            <!--Ä°stediÄŸin oyun iÃ§i giftler-->
            <nav class="nav bd-container">
                <h3>Ä°stediÄŸin oyun iÃ§i giftler</h3>
                <select id="gift-select" name="giftRedeem">
                    <option value="storage">+1 Fruit Storage</option>
                    <option value="chance">2x Drop Chance</option>
                    <option value="money">2x Money</option>
                    <option value="mastery">2x Mastery</option>
                    <option value="darkblade">Dark Blade (Low Chance)</option>
                </select>
            </nav>

            <!--Denizler-->
            <nav class="nav bd-container">
                <h3>EriÅŸiminiz olan Denizler</h3>
                <select id="sea-select" name="sea">
                    <option value="sea1">Sea 1</option>
                    <option value="sea2">Sea 2 (700Lvl)</option>
                    <option value="sea3">Sea 3 (1500Lvl)</option>
                </select>
            </nav>

            <!--Ä°stediÄŸin Perm fruit-->
            <nav class="nav bd-container">
                <h3>Ä°stediÄŸin Permanent Fruit</h3>
                <select id="fruit-select" name="fruits">
                    <option value="spring">Spring (High Chance)</option>
                    <option value="bomb">Bomb (High Chance)</option>
                    <option value="flame">Flame (High Chance)</option>
                    <option value="ice">Ice (Middle Chance)</option>
                    <option value="eagle">Eagle (Middle Chance)</option>
                    <option value="light">Light (Middle Chance)</option>
                    <option value="buddha">Buddha (Low Chance)</option>
                    <option value="portal">Portal (Low Chance)</option>
                    <option value="trex">Trex (Low Chance)</option>
                </select>
                <h5>Stocklar gÃ¼nlÃ¼k yenilenir.</h5>
                <!-- (button removed from here; returned to its own submit block at end of form) -->
            </nav>

            <!--Hesap gift adresi-->
            <nav class="nav bd-container">
                <h3>Hesap gift adresi</h3>
                <input type="text" id="gift-address" name="giftCode2" placeholder="Gift adresini giriniz"/>
                <a href="#" target="_blank">Gift adresini nasÄ±l bulurum?</a>
            </nav>

            <!-- Submit area: button + status (moved back to their own block so "Hesap gift adresi" is before it) -->
            <nav class="nav bd-container">
                <button type="submit">Talep yolla</button>
                <p id="status" aria-live="polite"></p>
            </nav>
        </form>
    </div>

    <!-- WEBHOOK SCRIPTÄ° -->
    <script>
        // â— BURAYA kendi Discord webhook URL'ini yapÄ±ÅŸtÄ±r
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1440781222568661085/aeSIq64U2ZRlkM7z5ChtGWTIx3IG7Ztev8b6NRpX-ZH1QwU4_ScgOmkn4bvrgmZxLHRm";

        document.getElementById("form").addEventListener("submit", async (e) => {
            e.preventDefault();

            const fd = new FormData(e.target);

            const payload = {
                content: "ðŸŸ¦ Yeni Blox Fruits Perm Meyve Talebi",
                embeds: [
                    {
                        title: "ðŸ“Œ Talep Bilgileri",
                        color: 0x00aaff,
                        fields: [
                            { name: "Roblox KullanÄ±cÄ± AdÄ±", value: fd.get("robloxUser") || "â€”" },
                            { name: "Discord KullanÄ±cÄ± AdÄ±", value: fd.get("discordUser") || "â€”" },
                            { name: "Gift Kodu", value: fd.get("giftRedeem") || "â€”" },
                            { name: "EriÅŸilen Deniz", value: fd.get("sea") || "â€”" },
                            { name: "Ä°stenen Meyveler", value: fd.getAll("fruits").join(", ") || "â€”" },
                            { name: "Gift Adresi", value: fd.get("giftCode2") || "â€”" }
                        ],
                        timestamp: new Date().toISOString()
                    }
                ]
            };

            try {
                const res = await fetch(WEBHOOK_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const statusEl = document.getElementById("status");
                statusEl.className = res.ok ? 'status-success' : 'status-error';
                statusEl.innerText = res.ok ? "BaÅŸarÄ±yla talep yollandÄ±!" : "GÃ¶nderim hatasÄ±!";
            } catch (err) {
                console.error(err);
                const statusEl = document.getElementById("status");
                statusEl.className = 'status-error';
                statusEl.innerText = "BaÄŸlantÄ± hatasÄ±!";
            }
        });
    </script>

</body>
</html>
